#!/bin/sh -eux

linux() {
    echo "LINUX"
}

mac() {
    command -v brew || ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    brew update
    brew upgrade

    brew install bash bash-completion@2
    BREW_BASH="/usr/local/bin/bash"
    grep "$BREW_BASH" /etc/shells || echo "$BREW_BASH" | sudo tee -a /etc/shells
    [ "$SHELL" = "$BREW_BASH" ] || chsh -s "$BREW_BASH"

    brew install git git-crypt gitleaks
    ln -sf "$(brew --prefix)/share/git-core/contrib/diff-highlight/diff-highlight" "$HOME/local/bin"
    git config --global credential.helper osxkeychain
    git config --global tag.gpgSign true

    brew install tmux
    brew install vim

    brew install python

    brew cask install kitty

    brew cask install sublime-text
    brew cask install sublime-merge
    ln -sf "$HOME/.config/sublime-text-3" "$HOME/Library/Application Support/Sublime Text 3"

    brew install gpg
    brew install tarsnap
    brew cask install keybase

    brew install dash htop pv parallel
    brew cask install caffeine divvy flux
    brew cask install dropbox evernote
    brew cask install google-chrome firefox
    brew cask install 1password 1password-cli

    brew cleanup
    brew doctor
}

case $(uname) in
    Linux*) linux ;;
    Darwin*)  mac ;;
esac
